#!/usr/bin/env node

var argv = require('optimist').argv;
var server = require('../crud-file-server');

if(!argv.q) {
	console.log('usage:');	
	console.log('     crud-file-server [options]');
	console.log('');
	console.log('this starts a file server server using the specified command-line options.');
	console.log('');
	console.log('options:');
	console.log('');
	console.log('	-f: file system path to expose over http');
	console.log('	-p: port to listen on (example, 80)');
	console.log('	-q: suppress this message');
	console.log('');
}

var port = argv.p || 80;
var path = argv.f || __dirname;

require('http').createServer(function (req, res) {
	server.handleRequest(port, path, req, res);
}).listen(port);

console.log('server started');
console.log('listening on port ' + port + ', serving directory ' + path);
