{"ts":1347500016891,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var fs = require('fs');\nvar error = require('./error.js');\n\nexports.handleRequest = function(req, res, options, relativePath, query, url) {\n\tconsole.log('writing ' + relativePath);\n\tvar stream = fs.createWriteStream(relativePath);\t\t\n\tstream.ok = true;\n\treq.pipe(stream); // TODO: limit data length\n\treq.on('end', function() {\t\t\t\t\n\t\tif(stream.ok) {\n\t\t\tres.end();\n\t\t}\n\t});\n\tstream.on('error', function(err) {\t\t\t\t\t\n\t\tstream.ok = false;\n\t\terror.write(res, err);\n\t});\n}"]],"start1":0,"start2":0,"length1":0,"length2":464}]],"length":464}
